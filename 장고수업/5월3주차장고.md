# 정리

client <요청과 응답>[django > DB]

요청 : url

응답 : html 문서

MTV

- M : 데이터 구조화
- T : 데이터를 표시하는 곳
- V : 데이터를 흘러가는 곳

# API

> Application Programming Interface
>
> 개발자용 접점

우리가 궁금해 하는 것 : 특정 데이터

특정 데이터만 받을 수 없을까?

## 데이터의 표기법

JSON

- JavaScript Object Notation

- JavaScript 객체식 **표기법**

XML

- e**X**tended **M**arkup **L**anguage (W3C, 1996)
- 닫는 tag, 기본 구조 : 데이터 길이가 길어진다

HTML

- key값 반영이 불가 (정해진 tag)
- 내가 만들고 싶은 tag 쓰면 되지 >>> XML



### 오늘의 목표

> Django 에서 JSON 형식에 맞춰서 Data만 제공하자 ( M V )
>
> T는 Vue.js가 대신한다.
>
> 사용자 > Vue,js > 장고 > JSON > HTML

Vue.js대신 Template 쓰면 안되요? > 나중에 알게 될것



Template

- React js
  - Facebook
- Angular js
  - Google
- Vue js
  - 핫핫핫

공통점 JS

# 라이브 코드

```python
# pip install django # 3.0.6버전 설치 > 장고 서드파티와 호환 여부 
# pip uninstall django
pip install django==2.1.15

```

```sql
pip install django==2.1.15
django-admin startproject api
cd api
python manage.py startapp board
```

```python
class Article(models.Model):
    title = models.CharField(max_length=100)
    content = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now_add=True)
```

```python
# settings.py
# Allowed_HOST, Installed_APP 변경
```

```sql
python manage.py makemigrations
python manage.py migrate
```

```python
# urls.py
from django.urls import include
url_patterns =[
    path('board', include('board.urls'))
]
```

```python
# urls.py
from django.urls import path
from . import views

app_name = 'board'

url_patterns =[
    
]
```

```sql
pip install faker
커맨드라인에서 ctrl + W > 단어단위로 지우기
pip list
pip show django

```

```python
# sql
pip install django_extensions

# setting.py
django_extensions 인스톨앱 추가

# sql
python manage.py shell_plus

# shell_plus
from faker import Faker
f = Faker()
f.text()
f.name()
f.paragraph*()

# models.py
from faker import Faker
f = Faker()
@classmethod
def dummy(cls, n):
    for _ in range(n):
        cls.objects.create(
        	title=f.name(),
            content=f.text(),
        )

# sql
python manage.py shell_plus

# shell_plus
Article.dummy(10)

# views.py
from .models import Article
from django.http.response import HttpResponse, JsonResponse
def article_list_json(request):
    articles = Article.objects.all() # query set
    # json [] or {} 필수
    # [{"title": article.title, "content": article.content}]
    data = []
	for article in articles:
        data.append({
            'articles_id': article.id,
            'title': article.title,
            'content': article.content,
            'created_at': article.created_at,
            'updated_at': article.updated_at,
        })
    return JsonResponse(data, safe=False )
# <JsonResponse status_code=200, "application/json">

# urls.py
path('json1/', views.article_list_json_1) 등록

# sql
python manage.py runserver 8080

# views.py
from django.views.decorators.http import require_GET
@require_GET
def article_list_json_2(request):
    from django.core import serializers
    articles = Article.objects.all()
    data = serializers.serialize('json', articles)
	# return JasonResponse(data, safe=False )
    return HttpResponse(data, content_type='application/json')

# sql
from django.core import serializers
data = serializers.serializer('json', articles)
#'[ {}: ... , ]'스트링 형태

# urls.py
path('json1/', views.article_list_json_2) 등록

# sql
pip install dajngorestframework

# settings.py
INSTALLED_APPS = [ 'rest_framework', ]

# views.py
from rest_framework.response import Response
from rest_framework.decorators import api_view

### sql
cd board
touch serializers.py

#### serializers.py
from rest_framework import serializers
from django import forms
from .models import Article

#### 모델폼과 유사
class ArticleSerializer(serializers.ModelSerializer):
    class Meta:
        model = Article
        fields = '__all__'

### views.py
from .models import Article
from .serializers import ArticleSerializer

@api_view(['GET'])
# @require_http_method(['GET', 'POST'])
def article_list_json_3(request): # rest framework
    articles = Article.objects.all()
    serializer = ArticleSerializer(articles, many=True) #many : 단일객체 아닌 다수객체임을 알려줌
    return Response(serializer.data) #rest_framework의 serializer를 리턴

### urls.py
path('json3/', views.aricle_list_json_3) 등록


# sql
python manage.py runserver 8080
```

Dajngo Rest Framework ( drf )를 쓰는 이유 :  **Serializer** 사용

JSON 응답

- 방법 1 : 노가다
- 방법 2 : (Inside 장고) core 불편
- 방법 3 : (Outside of 장고) drf 굿

# 줌1

1. UX > 유저 > 돈
   - 데이터
   - 모바일 어플리케이션(웹)
   - churn(이탈율)
   - JS (Adobe Flash)
2. 구조
   - 장고 - 서버
   - JS - 디스플레이

3. 직렬화( Serialize)
   
   - 포맷의 변환 (데이터를 전송/이동)
4. Object(언어, 데이터베이스)
   - String (JSON)
   - dict > JSON (stringify, serialize)
   - JSON > dict(parse, deserialize)

5. RESTful API

   - url을 깔끔하게 정리하는 방식
   - - 

   1. 동사 url 집어 넣지마 >>> HTTP method
      - C (POST), R (GET), U (PUT), D (DELETE)
   2. 목적어만 URL에 집어 넣어 >>> Resource(==data)

C :  `(POST)/articles/`

R 

- `(GET) /articles/`
- `(GET) /articles/<id> `

U : `(PUT) /articles/<id>`

D :  `(DELETE) /articles/<id>`

API 관련 URL

1. subdomain
   - api.github.com
2. 분리 URL
   - github.com/api/.....

3. versioning
   - github.com/api/{version}/...

## 라이브2

- 요청 == url == 서버에게 일 시키는것

- 응답 (개발자) : 개발자 마음.

  - ```python
    { "success": true,
      "articles":{
          "....":....,
      }
    }
    ```

  - 

URL : Uniform Resource Locator 또는 web address

RESTful

1. http verb (GET, POST, PUT/PATCH, DELETE)
2. 명사 (복수형)로 구성

POSTMAN

> 다양한 요청을 url로 보내주는 프로그램

- POSTMAN interceptor : 쿠키 훔쳐오기
- capture cookie
- source: interceptor, capture request

Documentation 작성

### 줌2

```python
# sql
pip install def-yasg

# Document
swagger
redoc
```



# 0512 장고

## why JS?

> of the browser
>
> by the browser
>
> for the browser

영상 Biggest Dot-com Companies 1998-2019

### 브라우저 역사

1. Netscape
   - Brandon Eich - 동적스크립트 - Mocha(=LiveScript=JavaScript)
   - European Computer Manufacturer Association
   - ECMA - JS ver.1 표준등록 시도 (Sun microsystems 태클)
   - ECMAScript ver.1 (ES1)이름으로 등록
   - ECMA는 웹 표준업체로 변화
2. 브라우저 전쟁
   - 98 : 윈도우 98 Explore 끼워팔기 & JS를 수정해서 JScript 만듬
   - Java, JavaScript / Explore / Mozila
   - 

3. 2005년 Google Maps, Google Us
   - JS, XML, AJAX
   - 프로그램을 설치하지 않도록 이렇게?

4. 2007년 Iphone : iPod + Phone + Internet
5. 2008년 크롬 등장
   - 빠른 스피드 : JS의 V8엔진
   - JS의 태생적 한계 : 브라우저 언어
6. 2009년 Ryan Dahl
   - node.JS : 브라우저 밖에 JS 환경 설정
7. jQuery : 크로스 브라우징 이슈 해결
   - jQuery > JS로 바꾸어줌

8. ES5(09'), ES6(15') + [ ES7(16'), ES8(17'), ES9(18'), ES10(19') ]
   - ES6 기반 수업 예정

### Node js

- Chocolatey v0.10.15 : choco 명령어로 설치 가능
- python;visualstudio2017-workload-vctools

- vcredist2015 v14.0.24215.20170201 [Approved]

- python3 v3.8.2 [Approved]
- ERROR: Running ["C:\ProgramData\chocolatey\lib\python3\tools\python-3.8.2-amd64.exe" /quiet InstallAllUsers=1 PrependPath=1 TargetDir="C:\Python38" ] was not successful. Exit code was '1603'. Exit code indicates the following: Generic MSI Error. This is a local environment error, not an issue with a package or the MSI itself - it could mean a pending reboot is necessary prior to install or something else (like the same version is already installed). Please see MSI log if available. If not, try again adding '--install-arguments="'/l*v c:\python3_msi_install.log'"'. Then search the MSI Log for "Return Value 3" and look above that for the error..
  The upgrade of python3 was NOT successful.
  Error while running 'C:\ProgramData\chocolatey\lib\python3\tools\chocolateyInstall.ps1'.
   See log for details.
- Failures : python3 (exited 1603) - Error while running 'C:\ProgramData\chocolatey\lib\python3\tools\chocolateyInstall.ps1'.
  See log for details.

### vanilla JS

> dependency 해결

- 세상에서 가장 가볍고 빠르고 크로스 플랫폼 가능한 JS
- 순수 자바스크립트만으로 빠르다는 캠페인

### VS code / 시크릿모드

```javascript
window # 탭, 최상단 객체, 쓸 일이 없다
window.document # 출력되는 문서
window.document.write('hello world') # 세미콜론 자동, 간혹 안됌, 회사 단위
```



# 0512 줌1

더미데이터 넣기

- 앱 > fixtures > dummy.json
- `python manage.py loaddata dummy.json`

- Testing, Fixtures > loaddata > dumpdata > xxx.json 포맷 Faker

덤프데이터

- `python manage.py dumpdata (앱이름) (모델이름)`
- default : auth 포함
- `python manage.py dumpdata (앱이름) (모델이름) > 파일명`
  - `>` : cld에서 pass 역할 

- `python manage.py dumpdata (앱이름) (모델이름) (옵션)> 파일명`
  - 옵션 : `--indent <int:간격>`

카운트하기

- 파이썬 vs DB > DB에서 하게 해야한다.
- Model의 method 보단, DB단이 카운트 하는 것이 좋다

- 복잡한 로직은 python으로 한다.

# 0512 라이브2

3대 구성요소

- BOM (Window) : 
- DOM (Document) : Dom 조작
- ES : PL

BOM : consol 명령어 빼고 쓸것이 없다

## ES

vanilla JS(브라우저), node JS(서버)

기업 스타일 가이드 따라가기 (ex: airbnb)

- Naming Convention : camel case
- 1급 함수 객체이다
  1. 변수에 저장할 수 있다
  2. 함수의 리턴값이 될 수 있다
  3. 함수의 인자가 될 수 있다

- 절대 느슨한 일치 연산자를 사용하지 않는다
  - 느슨한 : `==`, `!=`
  - 염격한 : `===`, `!==`
- let & const
  - let : 재할당이 가능하다
  - const : 재할당이 불가능하다.

### Dom을 이해해보자

> Document Object Model

- HTML > String  ||  해석 > 구조화(Dom Tree), 객체로 모델링 > 결과물 **DOM** || Rendering
- String : 문자열 탐색
  - Dom Tree : 트리 탐색
    - Node

컴퓨터가 이해 가능한 자료 구조 : 배열, **객체**, 튜플....

- HTML >>> **브라우저(해석, 구조화)** >>> DOM

- String >>> **이해, 해석 : json.loads(), json.parse()** >>> 결과물
- requests.get("url") >>> **BeautifulSoup** >>> 결과물



주어 - 동사 - 목적어

- 주어
  - document.querySelector('h1') : 유연하다.
  - document.getElementById('h1')
  - document.getElementsByTagName('h1')
  - innerHTML

- 동사
  - `.classList.add('str')`

잡아내는것 | 수정하는것 | 추가하는것

**DOM >>>> 스트링과 해석된 자료는 큰 차이가 있다.**

이것을 통해 무엇을 할 수 있을까??????????????

Programerble한 Document가 되었다.

ES(+,-,*,%)) + 문서조작(선택, 수정, 추가) >>> what can i do!



컴퓨터 명령

- 저장: 무엇을(자료형) 어디에(자료구조) 어떻게(=)
- 계산(조작): 조건, 반복, 함수
- => S+V(데이터+동작(함수)) => 클래스, 객체

1. 기존 언어로 작성했던 것을 새로운 언어로 작성한다(프로젝트)
2. 문제푼다(알고리즘)



# 0513 장고

## 라이브1

### 배포란 무엇인가

> Real artists ship

Software Deployment

- what : 우리는 서버컴퓨터에서 요청과 응답을 처리할 **프로그램**을 개발한다.
- when : While alive: 분석,계획,설계 > 개발 > 테스트 > 배포(배치) > 운영
- who & where: **Native App**: 사용자가 사용자com에 > **Web App** : 제공자가 제공자com에 {물리서버 > 클라우드서버}
  - aws, Azure, Google Cloud, HEROKU
- how : source code를 전송하여서 (매개체 (Bitbucket, GitHub, Gitlab), CI Server)
- why : SW를 사용할 수 있도록

### 배포를 위한 개념들

- 프로그램 구동을 위한 install list가 있어야한다
- version, package 이슈
- `pip freeze > 파일명` : pip list 출력
  - requirements.txt : 약속된 파일명
- `pip intall -r 파일명` : pip list 설치

가상환경

- `python -m venv venv`
  - venv : 독립된 환경 공간
- `source venv/bin/activate`
  - `(venv) pwd $`: (venv) 확인되면 된다.

프로젝트 시작시

1. 프로젝트 폴더 생성

2. .gitignore => venv/

3. python -m venv venv : 가상환경 설치

4. source ../../activate : 활성화

5. pip install django : 필요한 파일 설치

   ......

6. pip freeze > requirements.txt : 파일 리스트 작성

VS Code : Python Select Interpreter

