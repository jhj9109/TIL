## 0406 workshop

## 01

```python
from django.urls import path
from . import views

app_name = 'articles'

urlpatterns = [
    path('', views.index, name='index'),
    path('new/', views.new, name='new'),
    path('create/', views.create, name='create'),
    path('<int:pk>/', views.detail, name='detail'),
    path('edit/<int:pk>', views.edit, name='edit'),
    path('update/<int:pk>/', views.update, name='update'),
    path('delete/<int:pk>/', views.delete, name='delete'),
]

```



## 02

- detail.html

```python
{% extends 'base.html' %}
{% block body %}
  <h1>Detail</h1>
  <hr>
  <a href="{% url 'articles:new' %}">new</a>

  <h1>{{review.title}}</h1>
  <h2>{{review.content}}</h2>
  <h3>{{review.created_at}}</h3>
  <h4>{{review.updated_at}}</h4>
  <a href="{% url 'articles:edit' review.id %}">Edit </a><a href="{% url 'articles:delete' review.id %}">Delete</h3><br>
  <a href="{% url 'articles:index' %}">Back</a>

{% endblock %}

```

- edit.html

```python
{% extends 'base.html' %}
{% block body %}
  <h1>Edit</h1>
  <form action="{% url 'articles:update' review.id%}">
    <div class="form-group">
      <label for="title">title: </label>
      <input type="title" class="form-control" id="title" name="title" value={{review.title}}>
    </div>
    <div class="form-group">
      <label for="content">content: </label>
      <textarea class="form-control" id="content" name="content" rows="3" >{{review.content}}</textarea>
    </div>
    <button type="submit" class="btn btn-light">작성</button>
  </form>
  <a href="{% url 'articles:detail' review.id %}">Back</a>
{% endblock %}
```

- index.html

```python
{% extends 'base.html' %}
{% block body %}
  <h1>Index</h1>
  <a href="{% url 'articles:new' %}">new</a>
  {% for review in reviews%}
    <h1>제목: {{review.title}}</h1>
    <h2>내용: {{review.content}}</h2>
    <a href="{% url 'articles:detail' review.id %}">Detail</a>
    <hr>
    {% empty %}
    <h1>아무 글도 없습니다.</h1>
  {% endfor %}
{% endblock %}

```

- new.html

```python
{% extends 'base.html' %}
{% block body %}
  <h1>New</h1>
  <form action="{% url 'articles:create' %}" method="GET">
    <div class="form-group">
      <label for="title">title: </label>
      <input type="title" class="form-control" id="title" name="title">
    </div>
    <div class="form-group">
      <label for="content">content: </label>
      <textarea class="form-control" id="content" name="content" rows="3"></textarea>
    </div>
    <button type="submit" class="btn btn-light">작성</button>
  </form>
  <a href="{% url 'articles:index' %}">Back</a>
{% endblock %}
```

- views.py

```python
from django.shortcuts import render, redirect
from .models import Review

def create(request):
    Review.objects.create( title = request.GET.get('title'), content = request.GET.get('content') )
    return redirect ('articles:detail', Review.objects.last().id)

def update(request, pk):
    review = Review.objects.get(id=pk)
    review.title = request.GET.get('title')
    review.content = request.GET.get('content')
    review.save()
    return redirect ('articles:detail', review.id)

def delete(request, pk):
    Review.objects.get(id=pk).delete()
    return redirect('articles:index')
```

## 03

- edit.html

```python
{% extends 'base.html' %}
{% block body %}
  <h1>Edit</h1>
  <form action="{% url 'articles:update' review.id%}" method="POST">
    {% csrf_token %}
    <div class="form-group">
      <label for="title">title: </label>
      <input type="title" class="form-control" id="title" name="title" value={{review.title}}>
    </div>
    <div class="form-group">
      <label for="content">content: </label>
      <textarea class="form-control" id="content" name="content" rows="3" >{{review.content}}</textarea>
    </div>
    <button type="submit" class="btn btn-light">작성</button>
  </form>
  <a href="{% url 'articles:detail' review.id %}">Back</a>
{% endblock %}
```

- new.html

```python
{% extends 'base.html' %}
{% block body %}
  <h1>New</h1>
  <form action="{% url 'articles:create' %}" method="POST">
    {% csrf_token %}
    <div class="form-group">
      <label for="title">title: </label>
      <input type="title" class="form-control" id="title" name="title">
    </div>
    <div class="form-group">
      <label for="content">content: </label>
      <textarea class="form-control" id="content" name="content" rows="3"></textarea>
    </div>
    <button type="submit" class="btn btn-light">작성</button>
  </form>
  <a href="{% url 'articles:index' %}">Back</a>
{% endblock %}
```

